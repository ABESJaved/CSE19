<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simple Shop — Demo</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f7f7f7; color:#333 }
    .container{max-width:900px;margin:28px auto;padding:16px}
    header{display:flex;justify-content:space-between;align-items:center;padding:12px 0}
    .products{display:flex;gap:12px;flex-wrap:wrap}
    .card{background:#fff;padding:12px;border-radius:6px;box-shadow:0 1px 3px rgba(0,0,0,0.08);width:calc(33% - 8px)}
    .card img{width:100%;height:120px;object-fit:cover;border-radius:4px}
    .price{font-weight:bold;margin-top:8px}
    button{background:#2b6cb0;color:#fff;border:none;padding:8px 10px;border-radius:4px;cursor:pointer}
    .cart{background:#fff;padding:12px;border-radius:6px;box-shadow:0 1px 3px rgba(0,0,0,0.08)}
    .cart-list{margin-top:8px}
    .cart-item{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid #eee}
    @media(max-width:700px){.card{width:100%}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Simple Shop</h1>
      <div class="cart" style="min-width:180px">
        Cart: <span id="count">0</span> items
        <div class="cart-list" id="cartList"><em>No items</em></div>
      </div>
    </header>

    <main>
      <p>A minimal static product list with a small cart (no backend).</p>

      <section class="products" id="products"></section>
    </main>
  </div>

  <script>
    // Simple product data
    const products = [
      {id:1,title:'Red T-Shirt',price:499,img:'https://picsum.photos/seed/1/400/300'},
      {id:2,title:'Blue Jeans',price:1199,img:'https://picsum.photos/seed/2/400/300'},
      {id:3,title:'Sneakers',price:2499,img:'https://picsum.photos/seed/3/400/300'}
    ];

    const productsEl = document.getElementById('products');
    const cartListEl = document.getElementById('cartList');
    const countEl = document.getElementById('count');

    // cart stored as { id: qty }
    const cart = {};

    function renderProducts(){
      productsEl.innerHTML = '';
      products.forEach(p=>{
        const div = document.createElement('div'); div.className='card';
        div.innerHTML = `
          <img src="${p.img}" alt="${p.title}">
          <h3>${p.title}</h3>
          <div class="price">₹${p.price}</div>
          <div style="margin-top:8px"><button data-id="${p.id}">Add to cart</button></div>
        `;
        productsEl.appendChild(div);
      });

      // attach handlers
      productsEl.querySelectorAll('button').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const id = btn.dataset.id;
          cart[id] = (cart[id]||0)+1;
          renderCart();
        });
      });
    }

    function renderCart(){
      const keys = Object.keys(cart);
      if(keys.length===0){ cartListEl.innerHTML = '<em>No items</em>'; countEl.textContent = '0'; return; }
      cartListEl.innerHTML = '';
      let totalCount = 0;
      keys.forEach(k=>{
        const p = products.find(x=>x.id==k);
        const qty = cart[k];
        totalCount += qty;
        const div = document.createElement('div'); div.className='cart-item';
        div.innerHTML = `<div>${p.title} x ${qty}</div><div>₹${p.price*qty}</div>`;
        cartListEl.appendChild(div);
      });
      countEl.textContent = totalCount;
    }

    // init
    renderProducts();
    renderCart();
  </script>
<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>
</body>
</html>